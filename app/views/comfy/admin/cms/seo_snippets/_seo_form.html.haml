%section
  .form-horizontal
    .form-group
      .control-label.col-sm-2
        = label_tag('Label:')
      .col-sm-10
        = text_field(:seo_snippet, :label, value:'seo_snippet', class: 'form-control')
    .form-group
      .control-label.col-sm-2
        = label_tag('Context:')
      .col-sm-10
        = text_field(:seo_snippet, :context, value:'http://schema.org', class: 'form-control')
    .form-group
      .control-label.col-sm-2
        = label_tag('Type:')
      .col-sm-10
        = text_field(:seo_snippet, :type, value:'Organization', class: 'form-control')
    .form-group
      .control-label.col-sm-2
        = label_tag('URL:')
      .col-sm-10
        = url_field(:seo_snippet, :url, placeholder:'http://www.example.com', class: 'form-control')

%section
  #seo_tab_title_logo.seo_tab_title_clicked
    Organization Logo
  #seo_tab_title_contact
    Corporate Contact
  #seo_tab_title_profiles
    Social Profiles

%section
  .seo_tab_content
    .seo_logo
      %h5
        Organization Logo
      .form-horizontal
        .form-group
          .control-label.col-sm-2
            = label_tag('Logo:')
          .col-sm-10
            = url_field(:seo_snippet, :logo, placeholder:'http://www.example.com/images/logo.png', class: 'form-control')
    .seo_contact
      %h5
        Corporate Contact
      .form-horizontal
        = render 'corporate_contact'
      #add_corporate_contact Add another Corporate Contact
    .seo_profiles
      = render 'social_profiles'

= form.form_group :class => 'form-actions' do
  / add to yml file!!
  = form.submit 'Create SEO Snippet', :class => 'btn btn-primary'
  = link_to t('.cancel'), comfy_admin_cms_site_snippets_path, :class => 'btn btn-link'

= hidden_field_tag :hidden_number_from_view

:javascript
  $(function() {
    $(this).on('click', '#seo_tab_title_logo', function(event) {
      event.preventDefault();
      $(this).addClass('seo_tab_title_clicked')
      $(this).siblings().removeClass('seo_tab_title_clicked')
      $('.seo_logo').show();
      $('.seo_contact').hide();
      $('.seo_profiles').hide();
    });
  });

  $(function() {
    $(this).on('click', '#seo_tab_title_contact', function(event) {
      event.preventDefault();
      $(this).addClass('seo_tab_title_clicked')
      $(this).siblings().removeClass('seo_tab_title_clicked')
      $('.seo_logo').hide();
      $('.seo_contact').show();
      $('.seo_profiles').hide();
    });
  });

  $(function() {
    $(this).on('click', '#seo_tab_title_profiles', function(event) {
      event.preventDefault();
      $(this).addClass('seo_tab_title_clicked')
      $(this).siblings().removeClass('seo_tab_title_clicked')
      $('.seo_logo').hide();
      $('.seo_contact').hide();
      $('.seo_profiles').show();
    });
  });

  var contactCount = 0
  $(function() {
    $(this).on('click', '#add_corporate_contact', function(event) {
      event.preventDefault();
      contactCount ++;
      $("#hidden_number_from_view").attr('value', function(){
          return contactCount });

      $(this).before( "#{ (j = render 'add_corporate_contact' ).gsub(/[\n"]/, ' ') }" );
 
      attributeCollectionForInput = ['telephone', 'contact_url']
      attributeCollectionForSelect = ['contact_type', 'area_served', 'available_language']

      for (attribute in attributeCollectionForInput) {
        att = attributeCollectionForInput[attribute]
        $('.col-sm-10 input[ id=seo_snippet_'+att+' ]').attr('name', function(){
          return 'seo_snippet['+att+'_' +contactCount+ ']'});
        $('.col-sm-10 input[ id=seo_snippet_'+att+' ]').attr('id', function(){
          return 'seo_snippet_'+att+'_' +contactCount+ ']'});
      }

      for (attribute in attributeCollectionForSelect) {
        att = attributeCollectionForSelect[attribute]
        $('.col-sm-10 select[ id=seo_snippet_'+att+' ]').attr('name', function(){
          return 'seo_snippet['+att+'_' +contactCount+ ']'});
        $('.col-sm-10 select[ id=seo_snippet_'+att+' ]').attr('id', function(){
          return 'seo_snippet_'+att+'_' +contactCount+ ']'});
      }
    });
  });
